- name: Generate temparory files
  hosts: localhost
  become: true
  tasks:
    - name: Create temporary directory
      file:
        path: /tmp/temp_files
        state: directory

    - name: Generate files inside tmp
      shell: /home/ansible/playbooks/file_generator.sh

    - name: Ansible delete file
      find:
        paths: /tmp/temp_files
        patterns: "file*"
      register: files_to_delete
    - name: Confirm to continue
      pause:
        prompt: Please confirm you want to delete files! Press return to continue. Press Ctrl+c and then "a" to abort
    - name: Deleting files inside directory
      file:
        path: "{{ item.path }}"
        state: absent
      with_items: "{{ files_to_delete.files }}"
